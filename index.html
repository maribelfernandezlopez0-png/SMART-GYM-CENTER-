<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>S.M.G CENTER | VIP APP</title>
    
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SMG VIP">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3135/3135715.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff0000;
            --primary-soft: #ffb7b2;
            --bg: #050505;
            --panel: #121212;
            --success: #b2f2bb;
            --info: #b2e2f2;
            --gold: #f1c40f;
            --text: #ffffff;
            --text-dim: #a0a0a0;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            margin: 0; font-family: 'Inter', sans-serif; 
            background-color: var(--bg); color: var(--text); 
            display: flex; height: 100vh; overflow: hidden; 
        }

        /* SIDEBAR / NAVEGACI√ìN INFERIOR EN M√ìVIL */
        .sidebar { 
            width: 260px; background: #000; border-right: 2px solid var(--primary); 
            display: flex; flex-direction: column; 
        }

        .brand { padding: 30px 10px; text-align: center; border-bottom: 1px solid #222; }
        .brand i { font-size: 40px; color: var(--primary); filter: drop-shadow(0 0 10px var(--primary)); }
        .brand h2 { font-size: 14px; margin-top: 10px; font-family: 'Orbitron'; letter-spacing: 1px; }

        .menu { flex: 1; padding: 10px 0; }
        .menu-item { 
            padding: 15px 25px; display: flex; align-items: center; 
            color: var(--text-dim); text-decoration: none; font-weight: 600; 
            font-size: 13px; cursor: pointer; border-left: 4px solid transparent;
        }
        .menu-item i { margin-right: 12px; font-size: 18px; }
        .menu-item.active { background: #1a0000; color: #fff; border-left: 4px solid var(--primary); }

        /* VISTA PRINCIPAL */
        .viewport { flex: 1; padding: 25px; overflow-y: auto; background: radial-gradient(circle at top right, #1a0000, #050505); }
        .section { display: none; max-width: 900px; margin: 0 auto; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* CARDS Y FORMS */
        .glass-panel { background: var(--panel); padding: 25px; border-radius: 15px; border: 1px solid #333; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        .group { display: flex; flex-direction: column; margin-bottom: 10px; }
        label { font-size: 10px; font-weight: 700; color: var(--primary-soft); margin-bottom: 5px; text-transform: uppercase; }
        input, select { padding: 12px; background: #000; border: 1px solid #333; color: #fff; border-radius: 8px; font-size: 14px; outline: none; }
        
        .btn-vip { 
            background: var(--primary); color: white; border: none; padding: 15px; 
            border-radius: 10px; font-weight: 800; font-family: 'Orbitron'; cursor: pointer; 
            width: 100%; margin-top: 10px; letter-spacing: 1px;
        }

        /* TABLAS M√ìVILES */
        .table-container { background: var(--panel); border-radius: 15px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 500px; }
        th { background: #000; padding: 15px; color: var(--gold); font-size: 11px; text-transform: uppercase; }
        td { padding: 15px; text-align: center; border-bottom: 1px solid #1a1a1a; font-size: 13px; }

        .badge { padding: 4px 10px; border-radius: 4px; font-size: 9px; font-weight: 800; }
        .status-v { background: var(--success); color: #052c05; }
        .status-x { background: var(--primary); color: #fff; }

        /* RESPONSIVE M√ìVIL */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: 70px; border-right: none; border-top: 2px solid var(--primary); order: 2; position: fixed; bottom: 0; }
            .brand { display: none; }
            .menu { display: flex; justify-content: space-around; padding: 0; }
            .menu-item { flex-direction: column; padding: 10px; font-size: 9px; border-left: none; border-top: 3px solid transparent; }
            .menu-item i { margin: 0 0 5px 0; font-size: 20px; }
            .menu-item.active { border-left: none; border-top: 3px solid var(--primary); background: none; }
            .viewport { padding: 15px; padding-bottom: 90px; order: 1; }
            .form-row { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: 1fr 1fr !important; gap: 10px; }
        }

        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px; }
        .stat-box { background: var(--panel); padding: 15px; border-radius: 12px; border: 1px solid #222; text-align: center; }
        .stat-box h4 { margin: 0; font-size: 9px; color: var(--text-dim); }
        .stat-box h2 { margin: 5px 0 0; font-size: 20px; font-family: 'Orbitron'; }

        /* MODAL */
        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.95); z-index: 2000; align-items: center; justify-content: center; padding: 20px; }
        .ficha-vip { background: #111; width: 100%; max-width: 350px; padding: 25px; border-radius: 20px; border: 1px solid var(--primary); text-align: center; }
        
        #print-zone { display: none; text-align: center; color: black; font-family: monospace; }
        @media print { body * { visibility: hidden; } #print-zone, #print-zone * { visibility: visible; } #print-zone { display: block; position: absolute; top:0; left:0; width:100%; } }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="brand"><i class="fa-solid fa-dumbbell"></i><h2>SMG CENTER</h2></div>
    <div class="menu">
        <div class="menu-item active" onclick="nav('sec-reg', this)"><i class="fa-solid fa-plus"></i> NUEVO</div>
        <div class="menu-item" onclick="nav('sec-soc', this)"><i class="fa-solid fa-users"></i> SOCIOS</div>
        <div class="menu-item" onclick="nav('sec-caj', this)"><i class="fa-solid fa-cash-register"></i> CAJA</div>
    </div>
</div>

<div class="viewport">
    
    <div id="sec-reg" class="section" style="display: block;">
        <div class="glass-panel">
            <h3 style="font-family:'Orbitron'; color:var(--primary); margin-top:0;">REGISTRO VIP</h3>
            <div class="group"><label>Nombre</label><input type="text" id="v-nom" placeholder="NOMBRE COMPLETO"></div>
            <div class="form-row">
                <div class="group"><label>Plan</label>
                    <select id="v-plan" onchange="autoFinan(); calcVence();">
                        <option value="SEMANAL">SEMANAL ($150)</option>
                        <option value="MENSUAL">MENSUAL ($380)</option>
                    </select>
                </div>
                <div class="group"><label>Inicio</label><input type="date" id="v-ini" onchange="calcVence()"></div>
            </div>
            <div class="form-row">
                <div class="group"><label>Pag√≥ ($)</label><input type="number" id="v-pag" onkeyup="calcFinan()"></div>
                <div class="group"><label>M√©todo</label><select id="v-met"><option>EFECTIVO</option><option>TRANSFERENCIA</option></select></div>
            </div>
            <div class="form-row">
                <div class="group"><label>Deuda</label><input type="text" id="v-res" readonly style="color:var(--primary)"></div>
                <div class="group"><label>Vence</label><input type="date" id="v-ven" readonly></div>
            </div>
            <button class="btn-vip" onclick="saveData()">GUARDAR Y TICKET</button>
        </div>
    </div>

    <div id="sec-soc" class="section">
        <div class="stats-grid">
            <div class="stat-box"><h4>TOTAL</h4><h2 id="st-t">0</h2></div>
            <div class="stat-box"><h4>VIG</h4><h2 id="st-v" style="color:var(--success)">0</h2></div>
            <div class="stat-box"><h4>DEU</h4><h2 id="st-d" style="color:var(--gold)">0</h2></div>
            <div class="stat-box"><h4>VEN</h4><h2 id="st-x" style="color:var(--primary)">0</h2></div>
        </div>
        <input type="text" id="v-bus" onkeyup="renderTable()" placeholder="üîç BUSCAR..." style="width:100%; margin-bottom:15px; padding:12px; background:#111; border:1px solid #333; color:#fff; border-radius:10px;">
        <div class="table-container"><table id="v-tabla"></table></div>
    </div>

    <div id="sec-caj" class="section">
        <div class="stats-grid" style="grid-template-columns: 1fr 1fr !important;">
            <div class="stat-box"><h4>EFECTIVO</h4><h2 id="cj-e" style="color:var(--success)">$0</h2></div>
            <div class="stat-box"><h4>TRANSF.</h4><h2 id="cj-t" style="color:var(--info)">$0</h2></div>
        </div>
        <div class="table-container"><table><thead><tr><th>FECHA</th><th>SOCIO</th><th>MONTO</th></tr></thead><tbody id="v-caja"></tbody></table></div>
    </div>
</div>

<div id="modalFicha" class="modal" onclick="this.style.display='none'"><div class="ficha-vip" id="ficha-cont"></div></div>

<div id="print-zone"></div>

<script>
    let db = JSON.parse(localStorage.getItem('smg_v10')) || [];
    let caja = JSON.parse(localStorage.getItem('smg_caja10')) || [];

    function nav(id, el) {
        document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
        document.getElementById(id).style.display = 'block';
        document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
        el.classList.add('active');
        if(id==='sec-soc') renderTable();
        if(id==='sec-caj') renderCaja();
    }

    function autoFinan() {
        const p = document.getElementById('v-plan').value;
        document.getElementById('v-pag').value = (p === 'SEMANAL' ? 150 : 380);
        calcFinan();
    }

    function calcFinan() {
        const p = document.getElementById('v-plan').value;
        const total = (p === 'SEMANAL' ? 150 : 380);
        const pago = parseFloat(document.getElementById('v-pag').value) || 0;
        document.getElementById('v-res').value = "$" + (total - pago).toFixed(2);
    }

    function calcVence() {
        const ini = document.getElementById('v-ini').value;
        if(!ini) return;
        let d = new Date(ini + 'T00:00:00');
        const p = document.getElementById('v-plan').value;
        d.setDate(d.getDate() + (p === 'SEMANAL' ? 7 : 30));
        d.setDate(d.getDate() - 1);
        document.getElementById('v-ven').value = d.toISOString().split('T')[0];
    }

    function saveData() {
        const n = document.getElementById('v-nom').value.toUpperCase();
        const p = document.getElementById('v-pag').value;
        const v = document.getElementById('v-ven').value;
        if(!n || !v) return alert("LLENA LOS DATOS");

        const obj = { nombre: n, pago: p, resta: document.getElementById('v-res').value, vence: v, metodo: document.getElementById('v-met').value, plan: document.getElementById('v-plan').value, inicio: document.getElementById('v-ini').value };
        db.push(obj);
        caja.unshift({ fecha: new Date().toLocaleDateString(), socio: n, monto: p, metodo: obj.metodo });

        localStorage.setItem('smg_v10', JSON.stringify(db));
        localStorage.setItem('smg_caja10', JSON.stringify(caja));
        
        // Simular Ticket
        document.getElementById('print-zone').innerHTML = `<h2>SMG CENTER</h2><p>SOCIO: ${n}</p><p>PAG√ì: $${p}</p><p>VENCE: ${v}</p>`;
        window.print();
        nav('sec-soc', document.querySelectorAll('.menu-item')[1]);
    }

    function renderTable() {
        const bus = document.getElementById('v-bus').value.toUpperCase();
        const hoy = new Date().toISOString().split('T')[0];
        let t=0, v=0, d=0, x=0, h = '<thead><tr><th>NOMBRE</th><th>ESTADO</th><th>DEUDA</th><th>ACCI√ìN</th></tr></thead><tbody>';
        
        db.forEach((s, i) => {
            if(s.nombre.includes(bus)) {
                const isV = s.vence >= hoy;
                const deud = s.resta !== "$0.00";
                t++; isV ? v++ : x++; if(deud) d++;
                h += `<tr><td onclick="verFicha(${i})" style="font-weight:bold">${s.nombre}</td>
                    <td><span class="badge ${isV?'status-v':'status-x'}">${isV?'VIG':'VEN'}</span></td>
                    <td style="color:${deud?'var(--gold)':'#555'}">${s.resta}</td>
                    <td><button onclick="borrar(${i})" style="background:none; border:none; color:red">üóëÔ∏è</button></td></tr>`;
            }
        });
        document.getElementById('v-tabla').innerHTML = h + '</tbody>';
        document.getElementById('st-t').innerText = t; document.getElementById('st-v').innerText = v;
        document.getElementById('st-d').innerText = d; document.getElementById('st-x').innerText = x;
    }

    function verFicha(i) {
        const s = db[i];
        document.getElementById('ficha-cont').innerHTML = `<h2 style="font-family:'Orbitron'">${s.nombre}</h2><hr><p>PLAN: ${s.plan}</p><p>VENCE: ${s.vence}</p><p>DEUDA: ${s.resta}</p><p>METODO: ${s.metodo}</p>`;
        document.getElementById('modalFicha').style.display = 'flex';
    }

    function renderCaja() {
        let e=0, t=0;
        document.getElementById('v-caja').innerHTML = caja.map(c => {
            if(c.metodo==='EFECTIVO') e += parseFloat(c.monto); else t += parseFloat(c.monto);
            return `<tr><td>${c.fecha}</td><td>${c.socio}</td><td>$${c.monto}</td></tr>`;
        }).join('');
        document.getElementById('cj-e').innerText = "$" + e.toFixed(2);
        document.getElementById('cj-t').innerText = "$" + t.toFixed(2);
    }

    function borrar(i) { if(confirm("ELIMINAR?")) { db.splice(i,1); localStorage.setItem('smg_v10', JSON.stringify(db)); renderTable(); } }

    document.getElementById('v-ini').valueAsDate = new Date();
    autoFinan();
</script>

</body>
</html>

